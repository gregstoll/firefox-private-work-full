if CONFIG["ENABLE_TESTS"]:
    Program("content_analysis_sdk_agent_misbehaving")

    DEFINES["UNICODE"] = True
    DEFINES["GOOGLE_PROTOBUF_NO_RTTI"] = True
    DEFINES["GOOGLE_PROTOBUF_NO_STATIC_INITIALIZER"] = True

    SOURCES += [
        "../../../../toolkit/components/contentanalysis/content_analysis/sdk/analysis.pb.cc",
        "agent.cc",
        "agent_base.cc",
        "agent_utils_win.cc",
        "agent_win.cc",
        "common/utils_win.cc",
        "event_base.cc",
        "event_win.cc",
    ]

    LOCAL_INCLUDES += [
        "../../../../third_party/content_analysis_sdk/agent/include/",
        "../../../../toolkit/components/contentanalysis",
    ]

    USE_LIBS += [
        "../../../../mozglue/build/mozglue",
        "../../../../toolkit/components/protobuf/protobuf",
        "zlib",
    ]

    OS_LIBS += [
        "advapi32",
    ]
